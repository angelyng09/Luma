# Luma 技术路线方案（详细版）

## 1. 目标概述
面向室内场景的无障碍信息获取、社区共建与实时反馈，帮助视障用户在出行前与到达后快速了解场所情况，并为场所改进提供持续反馈。

## 2. 核心用户场景与流程
### 2.1 出行前（语音检索 -> 评估 -> 决策）
- 语音输入“我想去 XX 医院/商场/图书馆”。
- 返回候选地点列表（含距离、评分、无障碍要点、近期反馈）。
- 进入地点详情，查看无障碍维度评分与评论后做出是否前往的决策。

### 2.2 到达后（扫码 -> 分层信息 -> 快速定位）
- 扫描入口/楼层/区域二维码，获取该区域无障碍信息。
- 信息按“楼层 -> 区域 -> 设施点位”分层展示（如卫生间、电梯、服务台）。
- 支持一键语音播报与快捷总结（如“本层无障碍卫生间在东侧，电梯正常”）。

### 2.3 实时反馈（语音提交 -> 社区同步 -> 场所改进）
- 用户语音提交“电梯坏了、无障碍卫生间锁住”等即时反馈。
- 反馈进入社区流并标注时间与位置，提醒其他用户。
- 同步到场所账号作为改进依据。

## 3. 无障碍维度设计（可扩展）
建议初期维度：
- **通达性**：入口/通道是否可达、是否有台阶或坡道。
- **核心设施**：无障碍卫生间、电梯、服务台等可用性。
- **标识与引导**：指引是否清晰、有无音频提示。
- **安全与舒适**：地面障碍、拥挤度、噪音、光线 (高峰拥挤等级)。
- **信息时效性**：最近一次反馈时间、近期问题频次。

评分建议：
- 每个方面打 0–5 分，按重要性算总分。
- 评分结果同时展示“最近更新时间”和“样本数”，避免旧数据误导。
- 支持按用户需求调整重要性（如轮椅用户提高“电梯/无障碍通道/自动门”的重要性）。

未来扩展维度：
- **室内导航系统部署情况**（BLE/二维码引导覆盖度)，导航范围、是否能顺利到达、定位是否稳定。
- **场所响应度**（问题修复速度、官方回复质量）

## 4. 技术路线（阶段性）
### 阶段 A：语音检索与无障碍评估
- 语音识别输入地点关键词（内置 + 在线语音识别）。
- 地点搜索返回候选列表，支持“最近/评分/无障碍等级”排序。
- 详情页展示无障碍维度评分与评论。

### 阶段 B：到达场所后的信息获取（二维码）
- QR 码绑定“场所 + 楼层 + 区域”元数据。
- 扫码后请求区域详情与设施点位信息。
- 语音播报关键结果，文本与语音同时呈现。

### 阶段 C：未来拓展（室内引导与语音提示）
- BLE 信标 + 二维码组合定位与引导。
- 语音提示节点（如“前方 5 米左转到电梯”）。
- 将是否部署引导系统纳入无障碍维度评分。

### 阶段 D：实时语音反馈与社区同步
- 语音转文字 + 结构化标签（电梯故障/卫生间拥堵等）。
- 即时反馈入库并推送到社区流与场所账号。

## 5. MVP 版本范围（比赛阶段）
**MVP 不包含室内导航功能**，重点聚焦：
- 语音检索地点
- 无障碍维度评分与评论
- 场所二维码信息获取（分楼层/区域）
- 语音反馈 -> 社区同步

## 6. 客户端实现（SwiftUI）
### 6.1 主要模块
- **语音输入模块**：语音识别、候选纠错与二次确认。
- **地点搜索与详情模块**：列表、评分、评论、维度拆解。
- **二维码扫描模块**：扫码识别 -> 区域详情展示。
- **语音播报模块**：关键结果 TTS 输出。
- **反馈提交模块**：语音转写、标签选择、提交确认。

### 6.2 关键体验要求
- VoiceOver 适配、可调字号、高对比度。
- 操作流程尽量少步骤、避免复杂表单。
- 所有操作提供明确语音与震动反馈。

## 7. 数据与后端设计（简化）
### 7.1 核心数据模型（简化字段）
- **Place**：id、名称、地址、坐标、类型、评分汇总
- **AccessibilityDimension**：维度名、评分、说明
- **Review**：用户id、评分、维度评分、评论、时间
- **QRCodeArea**：场所id、楼层、区域、二维码内容
- **FacilityPoint**：位置、设施类型、可用状态
- **RealtimeFeedback**：语音转写、标签、时间、区域

### 7.2 QR 码内容结构建议
- 版本号 + 场所ID + 楼层ID + 区域ID
- 便于未来扩展字段，支持版本兼容。

## 8. 内容与质量保障
- 轻量审核：敏感词/垃圾内容过滤。
- 可信度提示：显示“最近反馈时间 + 反馈频次”。
- 允许场所账号回应与更新状态。

## 9. 隐私与安全
- 默认匿名贡献，支持自愿实名。
- 语音数据仅用于转写与提示，不做二次用途。
- 用户可随时删除自身反馈记录。

## 10. 里程碑建议（比赛周期）
1. **第 1 周**：需求冻结 + 原型 + 数据结构确认
2. **第 2 周**：语音检索 + 列表/详情页
3. **第 3 周**：二维码信息展示 + 语音播报
4. **第 4 周**：语音反馈 + 社区流 + 打磨

## 11. 风险与对策
- **数据冷启动**：与场所合作，导入基础信息。
- **反馈可信度**：引入时间权重与多反馈一致性提示。
- **场景复杂度**：MVP 阶段不做室内导航，降低技术风险。
